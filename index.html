<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>å°åŒ—æ…¢æ´»æ–‡é’ 4æ—¥3å¤œï½œæœ€çµ‚ç‰ˆ</title>
  <style>
    :root { --bg:#0b0d12; --card:rgba(255,255,255,.06); --card2:rgba(255,255,255,.10);
      --text:rgba(255,255,255,.92); --muted:rgba(255,255,255,.72); --muted2:rgba(255,255,255,.56);
      --line:rgba(255,255,255,.12); --radius:16px; --shadow:0 10px 30px rgba(0,0,0,.35);}
    *{box-sizing:border-box;}
    body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,"PingFang TC","Noto Sans TC","Microsoft JhengHei",Arial;
      background:radial-gradient(1200px 600px at 20% 0%, rgba(255,255,255,.08), transparent 60%),
               radial-gradient(900px 500px at 90% 10%, rgba(255,255,255,.06), transparent 55%), var(--bg);
      color:var(--text);}
    .wrap{max-width:1020px;margin:0 auto;padding:18px 14px 70px;}
    .header{padding:18px 16px;border:1px solid var(--line);
      background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      border-radius:var(--radius);box-shadow:var(--shadow);}
    .toprow{display:flex;align-items:flex-start;justify-content:space-between;gap:12px;}
    .kicker{font-size:12px;letter-spacing:.12em;text-transform:uppercase;color:var(--muted2);}
    .title{margin:8px 0 6px;font-size:26px;line-height:1.2;}
    .dates{color:var(--muted);font-size:14px;}
    .grid{margin-top:12px;display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px;}
    .meta{padding:12px 12px;border:1px solid var(--line);background:var(--card);border-radius:14px;min-height:84px;white-space:pre-line;}
    .meta h4{margin:0 0 6px;font-size:13px;color:var(--muted);font-weight:650;}
    .meta .main{font-size:14px;line-height:1.35;}
    .meta .sub{font-size:12px;color:var(--muted2);margin-top:6px;line-height:1.35;}
    .tabs{margin-top:14px;display:flex;gap:8px;flex-wrap:wrap;align-items:center;}
    .tab{border:1px solid var(--line);background:var(--card);color:var(--text);padding:10px 12px;border-radius:999px;
      cursor:pointer;font-size:13px;transition:.15s ease;white-space:nowrap;}
    .tab[aria-selected="true"]{background:var(--card2);border-color:rgba(255,255,255,.22);}
    .btn{border:1px solid rgba(255,255,255,.16);background:rgba(255,255,255,.06);color:var(--text);
      padding:10px 12px;border-radius:999px;cursor:pointer;font-size:13px;transition:.15s ease;white-space:nowrap;}
    .btn:hover{background:rgba(255,255,255,.12);}
    .btn:active{transform:scale(0.98);}
    .status{margin-top:8px;color:var(--muted2);font-size:12px;}
    .day{margin-top:14px;padding:16px;border:1px solid var(--line);background:rgba(255,255,255,.04);
      border-radius:var(--radius);box-shadow:var(--shadow);}
    .day h2{margin:0;font-size:18px;}
    .day .subtitle{margin-top:6px;color:var(--muted);font-size:13px;}
    .timeline{margin-top:12px;display:grid;gap:10px;}
    .item{border:1px solid var(--line);background:var(--card);border-radius:14px;padding:12px 12px;}
    .row{display:grid;grid-template-columns:98px 34px 1fr;gap:10px;align-items:start;}
    .time{font-variant-numeric:tabular-nums;color:var(--muted);font-size:13px;}
    .icon{width:34px;height:34px;display:grid;place-items:center;border-radius:10px;background:rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.10);}
    .ititle{font-size:15px;margin:0;}
    .note{margin-top:4px;color:var(--muted);font-size:13px;line-height:1.45;}
    .detail{margin-top:8px;color:var(--muted2);font-size:13px;line-height:1.55;}
    .actions{margin-top:10px;display:flex;gap:8px;flex-wrap:wrap;}
    a.linkbtn{display:inline-flex;align-items:center;gap:6px;border:1px solid rgba(255,255,255,.16);background:rgba(255,255,255,.06);
      color:var(--text);padding:8px 10px;border-radius:12px;text-decoration:none;font-size:13px;}
    .footer{margin-top:14px;color:var(--muted2);font-size:12px;text-align:center;}
    @media (max-width:820px){.grid{grid-template-columns:1fr;}}
    @media (max-width:640px){.row{grid-template-columns:84px 34px 1fr;}.toprow{flex-direction:column;}}
  </style>
</head>
<body>
  <div class="wrap">
    <section class="header">
      <div class="toprow">
        <div>
          <div class="kicker" id="titleSmall"></div>
          <div class="title" id="titleMain"></div>
          <div class="dates" id="dateRange"></div>
        </div>
        <div>
          <button class="btn" id="refreshBtn" title="é‡æ–°æ•´ç†è¡Œç¨‹è³‡æ–™">âŸ³ é‡æ–°æ•´ç†è¡Œç¨‹è³‡æ–™</button>
          <div class="status" id="status"></div>
        </div>
      </div>

      <div class="grid">
        <div class="meta">
          <h4>ä½å®¿</h4>
          <div class="main" id="hotelMain"></div>
          <div class="sub" id="hotelSub"></div>
        </div>
        <div class="meta">
          <h4>å»ç¨‹</h4>
          <div class="main" id="outMain"></div>
          <div class="sub" id="outSub"></div>
        </div>
        <div class="meta">
          <h4>å›ç¨‹</h4>
          <div class="main" id="inMain"></div>
          <div class="sub" id="inSub"></div>
        </div>
      </div>

      <div class="tabs" id="tabs"></div>
    </section>

    <section class="day" id="day"></section>
    <div class="footer" id="footerNote"></div>
  </div>

<script>
const TRIP_URL = "trip_taipei.json";
let TRIP = {"meta": {"titleSmall": "My Trip", "titleMain": "å°åŒ—æ…¢æ´»æ–‡é’ 4æ—¥3å¤œï½œæœ€çµ‚ç‰ˆ", "dateRange": "2026/01/23â€“01/26", "hotel": {"name": "è·¯å¢ƒè¡Œæ—…-åºœå‰é¤¨", "address": "No.86, Sec. 1, Chongqing S. Rd., Zhongzheng, Taipei, 10045 å°ç£", "checkin_date": "2026-01-23", "checkout_date": "2026-01-26", "checkin_time": "15:00", "checkout_time": "11:00", "booking_ref": "Expedia è¡Œç¨‹ç·¨è™Ÿï¼š73334373984620", "cancel_free_before": "2026-01-20 00:00ï¼ˆä½å®¿ç•¶åœ°æ™‚é–“ï¼‰å‰å¯å…è²»å–æ¶ˆ"}, "outbound": {"date": "2026-01-23", "flight": "HK Express 110", "route": "Hong Kong â†’ Taipei (TPE)", "time": "11:25 AM â†’ 1:10 PM (GMT+8)", "duration": "1 hr 45 min"}, "inbound": {"date": "2026-01-26", "flight": "HK Express 117", "route": "Taipei (TPE) â†’ Hong Kong", "time": "9:15 PM â†’ 11:25 PM (GMT+8)", "duration": "2 hr 10 min"}, "footerNote": "æ…¢æ´»ç‰ˆæœ¬ï¼ˆå¯æ’¤é€€è¨­è¨ˆï¼‰ï¼šæ¯ä¸€å¤©éƒ½å¯ä»¥ææ—©æ”¶å·¥ã€‚æŒ‰ã€Œé‡æ–°æ•´ç†è¡Œç¨‹è³‡æ–™ã€æœƒå³æ™‚é‡è¼‰ trip_taipei.jsonï¼ˆå¦‚ä½ æ›´æ–°å’—è³‡æ–™ï¼‰ã€‚"}, "days": [{"label": "Day 1", "date": "1æœˆ23æ—¥ï¼ˆäº”ï¼‰", "title": "è½åœ°é©æ‡‰ï½œOutlet Ã— è¥¿é–€ç”º Ã— ç´…æ¨“å¤œç”Ÿæ´»", "subtitle": "é †è·¯æ¶ˆåŒ–ç§»å‹•æˆæœ¬ï¼›ç¬¬ä¸€æ™šæ„Ÿå—å°åŒ—ï¼ˆè­˜äººå””ç”¨åŠ›ï¼‰", "items": [{"time": "11:25â€“13:10", "icon": "âœˆï¸", "title": "é¦™æ¸¯ â†’ å°åŒ—ï¼ˆå»ç¨‹ï¼‰", "note": "HK Express 110ï½œé£›è¡Œ 1å°æ™‚45åˆ†"}, {"time": "13:10â€“14:40", "icon": "ğŸ›¬", "title": "æ¡ƒåœ’æ©Ÿå ´å…¥å¢ƒï¼‹å–è¡Œæ", "note": "SIMï¼ææ¬¾å¦‚éœ€è¦ï¼›æ…¢æ…¢åšŸ"}, {"time": "14:50â€“16:30", "icon": "ğŸ›ï¸", "title": "è¯æ³°åå“åŸï¼ˆGLORIA OUTLETSï¼‰", "note": "äº¤é€šï¼šæ©Ÿå ´æ­¥è¡Œ 5â€“10 åˆ†é˜ï½œç­–ç•¥ï¼š90 åˆ†é˜ä¸Šé™ï¼Œåªè¡Œ 2â€“3 é–“", "maps": "https://www.google.com/maps/search/?api=1&query=%E8%8F%AF%E6%B3%B0%E5%90%8D%E5%93%81%E5%9F%8E%20GLORIA%20OUTLETS"}, {"time": "16:45â€“18:00", "icon": "ğŸš†", "title": "æ©Ÿæ·å…¥åŸ â†’ é…’åº—", "note": "é¦–é¸ï¼šæ¡ƒåœ’æ©Ÿå ´æ·é‹ â†’ A1 å°åŒ—è»Šç«™ï¼ˆç´„35â€“40åˆ†ï¼‰â†’ æ­¥è¡Œ10â€“12åˆ†æˆ–çš„å£«5åˆ†åˆ°é…’åº—", "detail": "é…’åº—ï¼šè·¯å¢ƒè¡Œæ—…-åºœå‰é¤¨ï¼ˆå¯å…ˆå¯„å­˜è¡Œæï¼›15:00 èµ·å¯æ­£å¼å…¥ä½ï¼‰ã€‚"}, {"time": "18:00â€“19:00", "icon": "ğŸ¨", "title": "å…¥ä½ï¼æ²–æ¶¼ï¼ä¼‘æ¯", "note": "åœä¸€åœï¼Œå¤œæ™šç²¾ç¥æœƒå·®å¥½é "}, {"time": "19:30â€“20:30", "icon": "ğŸš¶", "title": "è¥¿é–€ç”ºæ…¢è¡Œ", "note": "äº¤é€šï¼šé…’åº—æ­¥è¡Œ 8â€“10 åˆ†é˜ï½œè¡Œåˆ°èˆ’æœå°±æŠ˜è¿”", "maps": "https://www.google.com/maps/search/?api=1&query=%E8%A5%BF%E9%96%80%E7%94%BA"}, {"time": "20:30â€“21:15", "icon": "ğŸ½ï¸", "title": "æ™šé¤ï¼ˆç°¡å–®åå¾—ï¼‰", "note": "å»ºè­°ï¼šé‡‘å³°é­¯è‚‰é£¯ æˆ– é…’åº—é™„è¿‘ï¼›é¿å…å¤ªæ²¹è†©ï¼ˆç‚ºå¤œæ™šç•™åŠ›ï¼‰", "maps": "https://www.google.com/maps/search/?api=1&query=%E9%87%91%E5%B3%B0%E9%AD%AF%E8%82%89%E9%A3%AF"}, {"time": "21:30â€“22:30", "icon": "ğŸ¸", "title": "ç´…æ¨“å¤œï½œCafÃ© Dalidaï¼ˆæš–èº«æ˜“å‚¾åˆï¼‰", "note": "è¥¿é–€ç´…æ¨“é™„è¿‘ï½œæˆ¶å¤–åº§ä½å¤šï¼›é–‹å ´ç™½ï¼šç¬¬ä¸€æ¬¡åšŸç´…æ¨“ï¼Œæœ‰å†‡æ¨ä»‹ï¼Ÿ", "maps": "https://www.google.com/maps/search/?api=1&query=Caf%C3%A9%20Dalida%20Taipei"}, {"time": "22:30â€“23:30", "icon": "ğŸº", "title": "ç´…æ¨“å¤œï½œCommander Dï¼ˆèŠå¤©å‘ï¼‰", "note": "æƒ³å‚¾åˆå°±å»ï¼›è¦ºå¾—å¤ å°±ç›´æ¥è¿”é…’åº—ï¼ˆé›¶ KPIï¼‰", "maps": "https://www.google.com/maps/search/?api=1&query=Commander%20D%20Taipei"}, {"time": "23:30â€“00:00", "icon": "ğŸ›Œ", "title": "æ­¥è¡Œè¿”é…’åº—ï¼æ”¶å·¥", "note": "å…¨ç¨‹æ­¥è¡Œå¯è¿”ï¼›ä»»ä½•æ™‚å€™æƒ³èµ°å°±èµ°"}]}, {"label": "Day 2", "date": "1æœˆ24æ—¥ï¼ˆå…­ï¼‰", "title": "æ–‡é’å¸æ”¶æ—¥ï½œè¯å±±1914 Ã— æ›¸åº— Ã— çè‘—çˆ¹å£½å¸", "subtitle": "æ–‡åŒ–ï¼‹åä½ï¼‹ä¸€é¤å¥½é£Ÿï¼ˆç²¾ç¥æœ€å¥½çš„ä¸€å¤©ï¼‰", "items": [{"time": "09:30â€“10:30", "icon": "ğŸ¥£", "title": "æ—©é¤ï¼‹æ…¢æ…¢å‡ºé–€", "note": "ç›®æ¨™ï¼šå””è¶•"}, {"time": "10:30â€“11:00", "icon": "ğŸš‡", "title": "é…’åº— â†’ è¯å±±1914ï¼ˆäº¤é€šï¼‰", "note": "æ·é‹ï¼šè¥¿é–€â†’æ¿å—ç·šâ†’å–„å°å¯ºç«™ï¼ˆ2è™Ÿå‡ºå£æ­¥è¡Œç´„5åˆ†ï¼‰ï¼›æˆ–çš„å£«10â€“15åˆ†"}, {"time": "11:00â€“14:30", "icon": "ğŸ–¼ï¸", "title": "è¯å±±1914æ–‡å‰µåœ’å€", "note": "åšæ³•ï¼šå…ˆç¹ä¸€åœˆï¼Œå†æ€ 1 å€‹å±•ï¼‹1 é–“å’–å•¡ï¼›ç•™æ™‚é–“å", "maps": "https://www.google.com/maps/search/?api=1&query=%E8%8F%AF%E5%B1%B11914%E6%96%87%E5%89%B5%E5%9C%92%E5%8D%80"}, {"time": "14:30â€“15:00", "icon": "ğŸ§ƒ", "title": "å›åˆ°å¸‚ä¸­å¿ƒï¼å°ä¼‘", "note": "å¯ä»¥è¿”é…’åº—é™„è¿‘å 15â€“30 åˆ†é˜ï¼ˆè£œçµ¦ç«™ï¼‰"}, {"time": "15:00â€“17:00", "icon": "ğŸ“š", "title": "æ›¸åº—ï¼é–±è®€æ™‚é–“", "note": "å°åŒ—è»Šç«™ï¼è¥¿é–€ä¸€å¸¶ï¼›ä»Šæ—¥æˆåŠŸæŒ‡æ¨™ï¼šåå¾—è€", "maps": "https://www.google.com/maps/search/?api=1&query=%E8%AA%A0%E5%93%81%20%E8%A5%BF%E9%96%80%20%E5%8F%B0%E5%8C%97"}, {"time": "17:45â€“18:20", "icon": "ğŸš•", "title": "é…’åº— â†’ çè‘—çˆ¹ï¼ˆäº¤é€šï¼‰", "note": "çš„å£« 8â€“10 åˆ†é˜ï¼›æˆ–æ·é‹ï¼‹æ­¥è¡Œï¼ˆè¿‘è¥¿é–€ï¼è¬è¯ï¼‰"}, {"time": "18:30â€“20:00", "icon": "ğŸ£", "title": "çè‘—çˆ¹å£½å¸ï¼ˆå‰µå§‹åº—ï¼‰", "note": "å°åŒ—å¸‚è¬è¯å€æ­¦æ˜Œè¡—äºŒæ®µ82å··2å¼„4è™Ÿ2æ¨“ï¼ˆå»ºè­°æ—©åˆ°/é ç´„ï¼‰", "maps": "https://www.google.com/maps/search/?api=1&query=%E7%9E%9E%E8%91%97%E7%88%B9%E5%A3%BD%E5%8F%B8%20%E5%89%B5%E5%A7%8B%E5%BA%97"}, {"time": "20:30", "icon": "ğŸ¨", "title": "è¿”é…’åº—ï¼æ—©æ”¶å·¥", "note": "ç‚º Day 3 ç•™åŠ›"}]}, {"label": "Day 3", "date": "1æœˆ25æ—¥ï¼ˆæ—¥ï¼‰", "title": "æ…¢æ´»æ ¸å¿ƒæ—¥ï½œPokÃ©mon Ã— é¼æ³°è± Ã— 3å°æ™‚æŒ‰æ‘© Ã— å¤§èª å“", "subtitle": "é£Ÿå¾—å¥½ â†’ èº«é«”å›å¾© â†’ ç©ºé–“æ„Ÿå¤§æ›¸åº—ï¼ˆä»Šæ—¥å””ç”¨è…³æ‹¼å‘½ï¼‰", "items": [{"time": "09:45â€“10:30", "icon": "ğŸš‡", "title": "é…’åº— â†’ ä¿¡ç¾©å€ï¼ˆäº¤é€šï¼‰", "note": "æ·é‹ï¼šå°åŒ—è»Šç«™â†’æ¿å—ç·šâ†’å¸‚æ”¿åºœç«™ï¼›æ­¥è¡Œç´„10åˆ†åˆ°A11"}, {"time": "10:30â€“11:30", "icon": "ğŸ§¢", "title": "PokÃ©mon Center Taipeiï¼ˆA11ï¼‰", "note": "ç­–ç•¥ï¼š1 å°æ™‚ä¸Šé™ï¼›æ‹ç…§ï¼‹è²· 1â€“2 æ¨£ï¼›å¯å•å°åŒ—é™å®šå•†å“", "maps": "https://www.google.com/maps/search/?api=1&query=Pok%C3%A9mon%20Center%20Taipei"}, {"time": "11:30â€“12:45", "icon": "ğŸ¥Ÿ", "title": "é¼æ³°è±ï¼ˆæ–°å…‰ä¸‰è¶Š A4ï¼‰åˆé¤", "note": "å””ä½¿bookï¼ˆä¸€èˆ¬bookå””åˆ°ï¼‰ï¼›11:00â€“11:30 åˆ°æ›´ç©©ï¼›ç­‰ä½â‰¤45åˆ†å°±é£Ÿï¼Œçˆ†å°±è½‰A8", "maps": "https://www.google.com/maps/search/?api=1&query=%E9%BC%8E%E6%B3%B0%E8%B1%90%20%E6%96%B0%E5%85%89%E4%B8%89%E8%B6%8AA4"}, {"time": "12:45â€“13:20", "icon": "ğŸ§ƒ", "title": "ä¿¡ç¾©å€å°ä¼‘ï¼è£œæ°´", "note": "ç‚ºæŒ‰æ‘©å‰ç•™ç™½ï¼ˆå””å¥½ç¡¬å¡è¡Œç¨‹ï¼‰"}, {"time": "13:20â€“13:30", "icon": "ğŸš•", "title": "A4/A11 â†’ ä¸è€æ¾ï¼ˆäº¤é€šï¼‰", "note": "å»ºè­°çš„å£« 5â€“10 åˆ†é˜ï¼ˆæœ€çœè…³ï¼‰"}, {"time": "13:30â€“16:30", "icon": "â™¨ï¸", "title": "ä¸è€æ¾è¶³æ¹¯ãƒ»å°åŒ—ä¿¡ç¾©è¡Œé¤¨ï¼ˆ3 å°æ™‚æŒ‰æ‘©ï¼‰", "note": "è¶³æ¹¯ï¼‹æŒ‰æ‘©ï¼›ä¸­æ®µä¼‘æ¯ï¼›å””å¥½æ»‘æ‰‹æ©Ÿï¼ˆå›å¾©æ•ˆæœæœ€å¤§åŒ–ï¼‰", "maps": "https://www.google.com/maps/search/?api=1&query=%E4%B8%8D%E8%80%81%E6%9D%BE%E8%B6%B3%E6%B9%AF%20%E5%8F%B0%E5%8C%97%E4%BF%A1%E7%BE%A9%E8%A1%8C%E9%A4%A8"}, {"time": "16:30â€“17:30", "icon": "â˜•ï¸", "title": "æŒ‰æ‘©å¾Œå’–å•¡ï¼çŸ­ä¼‘", "note": "å…ˆå 20â€“40 åˆ†é˜å†å»æ¾è¸ï¼ˆèº«é«”æœƒæ›´èˆ’æœï¼‰"}, {"time": "17:30â€“19:30", "icon": "ğŸ“–", "title": "èª å“ç”Ÿæ´»æ¾è¸ï¼ˆå¤§èª å“ï¼‰", "note": "æŒ‰æ‘©å¾Œå””å»ºè­°æ­¥è¡Œå¤ªè€ï¼›çš„å£« 5â€“8 åˆ†é˜ï¼›è¡Œåˆ°æ”°å°±å", "maps": "https://www.google.com/maps/search/?api=1&query=%E8%AA%A0%E5%93%81%E7%94%9F%E6%B4%BB%E6%9D%BE%E8%8F%B8"}, {"time": "19:30â€“20:30", "icon": "ğŸš‡", "title": "æ¾è¸ â†’ é…’åº—ï¼ˆäº¤é€šï¼‰", "note": "æ·é‹ï¼šåœ‹çˆ¶ç´€å¿µé¤¨ç«™â†’æ¿å—ç·šâ†’è¥¿é–€/å°åŒ—è»Šç«™ï¼›ç´„30åˆ†"}, {"time": "20:30", "icon": "ğŸœ", "title": "ç°¡å–®æ™šé¤ï¼è¿”é…’åº—æ—©ç“", "note": "ä»Šæ—¥æ ¸å¿ƒå·²å®Œæˆï¼›æ—©ç“ï¼è¶…å€¼"}]}, {"label": "Day 4", "date": "1æœˆ26æ—¥ï¼ˆä¸€ï¼‰", "title": "æ”¶å°¾ç•™ç™½ï½œé€€æˆ¿å¯„å­˜ Ã— å…¬åœ’ PokÃ©mon GO Ã— å¤œæ©Ÿå›æ¸¯", "subtitle": "ä¸è£½é€ é¢¨éšªï¼›ç”¨å…¬åœ’æ”¾ç©ºæ”¶å°¾ï¼ˆ30â€“60åˆ†é˜å°±å¤ ï¼‰", "items": [{"time": "09:30â€“10:30", "icon": "â˜•ï¸", "title": "æ—©é¤ï¼‹æ”¶æ‹¾è¡Œæ", "note": "æ…¢æ…¢åŸ·ï¼Œå””æ€¥"}, {"time": "11:00", "icon": "ğŸ¨", "title": "é€€æˆ¿ï¼ˆå¯„å­˜è¡Œææ–¼é…’åº—ï¼‰", "note": "ä¹‹å¾Œæ´»å‹•ç„¡åŒ…è¢±ï¼›è¨˜å¾—å¸¶èµ°è­·ç…§/å……é›»å™¨ç­‰"}, {"time": "11:20â€“12:00", "icon": "ğŸš‡", "title": "é…’åº— â†’ å¤§å®‰æ£®æ—å…¬åœ’ï¼ˆäº¤é€šï¼‰", "note": "æ·é‹ï¼šè¥¿é–€/å°åŒ—è»Šç«™â†’æ¿å—ç·šâ†’å¿ å­æ–°ç”Ÿâ†’è½‰æ–‡æ¹–ç·šâ†’å¤§å®‰æ£®æ—å…¬åœ’ç«™ï¼›ç´„25â€“30åˆ†"}, {"time": "12:00â€“13:00", "icon": "ğŸŒ³", "title": "å¤§å®‰æ£®æ—å…¬åœ’ Ã— PokÃ©mon GOï¼ˆæ­£å¼è¡Œç¨‹ï¼‰", "note": "ç©æ³•ï¼š30â€“60 åˆ†é˜ï¼›å¹³è·¯ï¼‹å¤šæ¤…ï¼›è£œçµ¦ç«™å¯†ï¼Œå””ä½¿è¿½æ€ªï¼›è¡Œåˆ°èˆ’æœå°±èµ°", "maps": "https://www.google.com/maps/search/?api=1&query=%E5%A4%A7%E5%AE%89%E6%A3%AE%E6%9E%97%E5%85%AC%E5%9C%92"}, {"time": "13:15â€“15:30", "icon": "ğŸ¥ª", "title": "åˆé¤ï¼å’–å•¡ï¼ˆå…¬åœ’é™„è¿‘æˆ–è¿”å¸‚ä¸­å¿ƒï¼‰", "note": "ä»Šæ—¥ä¿‚ç•™ç™½æ—¥ï¼šåä½å…ˆä¿‚é‡é»"}, {"time": "15:30â€“16:30", "icon": "ğŸ§³", "title": "è¿”é…’åº—é™„è¿‘ï¼å–è¡Œæï¼æœ€å¾Œè£œè²·æ‰‹ä¿¡", "note": "è¥¿é–€ï¼å°åŒ—è»Šç«™ä¸€å¸¶æœ€æ–¹ä¾¿"}, {"time": "17:30â€“18:45", "icon": "ğŸš†", "title": "å°åŒ—è»Šç«™ A1 â†’ æ¡ƒåœ’æ©Ÿå ´ï¼ˆæ©Ÿæ·ï¼‰", "note": "ç´„35â€“40åˆ†ï¼›å¤œæ©Ÿå””å¥½æçš„å£«ï¼›å»ºè­° 18:45 å‰åˆ°"}, {"time": "21:15â€“23:25", "icon": "âœˆï¸", "title": "å°åŒ— â†’ é¦™æ¸¯ï¼ˆå›ç¨‹ï¼‰", "note": "HK Express 117ï½œé£›è¡Œ 2å°æ™‚10åˆ†"}]}]};
const EMBEDDED_TRIP = JSON.parse(JSON.stringify(TRIP));

function el(tag, attrs={}, ...children) {
  const n = document.createElement(tag);
  for (const [k,v] of Object.entries(attrs)) {
    if (k === "class") n.className = v;
    else if (k.startsWith("on") && typeof v === "function") n.addEventListener(k.slice(2), v);
    else if (v !== null && v !== undefined) n.setAttribute(k, v);
  }
  for (const c of children) {
    if (c === null || c === undefined) continue;
    n.appendChild(typeof c === "string" ? document.createTextNode(c) : c);
  }
  return n;
}

function setStatus(msg) {
  document.getElementById("status").textContent = msg || "";
}

function renderHeader() {
  document.getElementById("titleSmall").textContent = TRIP.meta.titleSmall || "";
  document.getElementById("titleMain").textContent = TRIP.meta.titleMain || "";
  document.getElementById("dateRange").textContent = TRIP.meta.dateRange || "";

  const h = TRIP.meta.hotel || {};
  document.getElementById("hotelMain").textContent = `${h.name || ""}`;
  document.getElementById("hotelSub").textContent  =
    `${h.address || ""}\nå…¥ä½ï¼š${h.checkin_date || ""} ${h.checkin_time || ""}ï½œé€€æˆ¿ï¼š${h.checkout_date || ""} ${h.checkout_time || ""}\n${h.booking_ref || ""}\n${h.cancel_free_before || ""}`;

  const o = TRIP.meta.outbound || {};
  const i = TRIP.meta.inbound || {};
  document.getElementById("outMain").textContent = `${o.flight || ""}ï½œ${o.route || ""}`;
  document.getElementById("outSub").textContent  = `${o.date || ""}  ${o.time || ""}  ${o.duration ? "ï½œ" + o.duration : ""}`;
  document.getElementById("inMain").textContent = `${i.flight || ""}ï½œ${i.route || ""}`;
  document.getElementById("inSub").textContent  = `${i.date || ""}  ${i.time || ""}  ${i.duration ? "ï½œ" + i.duration : ""}`;

  document.getElementById("footerNote").textContent = TRIP.meta.footerNote || "";
}

function renderTabs(selectedIdx) {
  const tabs = document.getElementById("tabs");
  tabs.innerHTML = "";
  (TRIP.days || []).forEach((d, i) => {
    const b = el("button", {
      class: "tab",
      "aria-selected": i === selectedIdx ? "true" : "false",
      onclick: () => setDay(i)
    }, `${d.label}ï½œ${d.date}`);
    tabs.appendChild(b);
  });
}

function renderDay(idx) {
  const d = (TRIP.days || [])[idx];
  const root = document.getElementById("day");
  root.innerHTML = "";
  if (!d) {
    root.appendChild(el("h2", {}, "æ‰¾ä¸åˆ°è©²æ—¥è¡Œç¨‹"));
    return;
  }
  root.appendChild(el("h2", {}, `${d.title}`));
  root.appendChild(el("div", {class: "subtitle"}, d.subtitle || ""));

  const list = el("div", {class: "timeline"});
  (d.items || []).forEach(item => {
    const card = el("div", {class:"item"});
    card.appendChild(
      el("div", {class:"row"},
        el("div", {class:"time"}, item.time || ""),
        el("div", {class:"icon"}, item.icon || "â€¢"),
        el("div", {},
          el("div", {class:"ititle"}, item.title || ""),
          el("div", {class:"note"}, item.note || "")
        )
      )
    );
    if (item.detail) card.appendChild(el("div", {class:"detail"}, item.detail));
    const actions = el("div", {class:"actions"});
    if (item.maps) actions.appendChild(el("a", {class:"linkbtn", href:item.maps, target:"_blank", rel:"noopener"}, "åœ°åœ–"));
    if (actions.childNodes.length) card.appendChild(actions);
    list.appendChild(card);
  });
  root.appendChild(list);
}

let current = 0;
function setDay(idx) {
  current = idx;
  renderHeader();
  renderTabs(current);
  renderDay(current);
}

async function refreshTripData() {
  TRIP = JSON.parse(JSON.stringify(EMBEDDED_TRIP));
  setDay(current);
  setStatus("æ­£åœ¨é‡æ–°æ•´ç†â€¦");

  try {
    const res = await fetch(`${TRIP_URL}?t=${Date.now()}`, { cache: "no-store" });
    if (!res.ok) throw new Error("HTTP " + res.status);
    const data = await res.json();
    if (!data || !data.meta || !Array.isArray(data.days)) throw new Error("JSON çµæ§‹ä¸æ­£ç¢º");
    TRIP = data;
    current = Math.min(current, TRIP.days.length - 1);
    setDay(current);
    setStatus("å·²æ›´æ–°ï¼ˆä¾†è‡ª trip_taipei.jsonï¼‰");
  } catch (e) {
    setStatus("å·²æ›´æ–°ï¼ˆä½¿ç”¨å…§åµŒè³‡æ–™ï¼›æœªæ‰¾åˆ°/ç„¡æ³•è®€å– trip_taipei.jsonï¼‰");
  }
}

document.getElementById("refreshBtn").addEventListener("click", refreshTripData);
setDay(0);
setStatus("å°±ç·’");
</script>
</body>
</html>
